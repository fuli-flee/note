[toc]

***
# 一. 3D数学
***
## 1. 数学计算公共类Mathf
### 1.1 Mathf和Math
- Math是C#中封装好的用于数学计算的工具类 —— 位于System命名空间中
- Mathf是Unity中封装好的用于数学计算的工具结构体 —— 位于UnityEngine命名空间中
- 他们都是提供来用于进行数学相关计算的

### 1.2 区别
Mathf 和 Math中的相关方法几乎一样
- Math 是C#自带的工具类 主要就提供一些数学相关计算方法
- Mathf 是Unity专门封装的，不仅包含Math中的方法，还多了一些适用于游戏开发的方法
- 所以我们在进行Unity游戏开发时, 使用Mathf中的方法用于数学计算即可

### 1.3 Mathf中的常用方法 -- 一次计算
**(1) π - PI**
```CSharp
print(Mathf.PI);
```
**(2)取绝对值 - Abs**
```CSharp
print(Mathf.Abs(-10));//10
print(Mathf.Abs(-20));//20
print(Mathf.Abs(1)); //1
```
**(3)向上取整 - CeilToInt**
```CSharp
float f = 1.3f;
int i = (int)f;
print(i);
print(Mathf.CeilToInt(f));
print(Mathf.CeilToInt(1.00001f));
```

**(4)向下取整 - FloorToInt**
```CSharp
print(Mathf.FloorToInt(9.6f));
```

**(5)钳制函数 - Clamp**
```CSharp
print(Mathf.Clamp(10, 11, 20));
print(Mathf.Clamp(21, 11, 20));
print(Mathf.Clamp(15, 11, 20));
```

**(6)获取最大值 - Max**
```CSharp
print(Mathf.Max(1, 2, 3, 4, 5, 6, 7, 8));
print(Mathf.Max(1, 2));
```

**(7)获取最小值 - Min**
```CSharp
print(Mathf.Min(1, 2, 3, 4, 545, 6, 1123, 123));
print(Mathf.Min(1.1f, 0.4f));
```

**(8)一个数的n次幂 - Pow**
```CSharp
print(Mathf.Min(1, 2, 3, 4, 545, 6, 1123, 123));
print(Mathf.Min(1.1f, 0.4f));
```

**(9)四舍五入 - RoundToInt**
```CSharp
print(Mathf.Min(1, 2, 3, 4, 545, 6, 1123, 123));
print(Mathf.Min(1.1f, 0.4f));
```

**(10)返回一个数的平方根 - Sqrt**
```CSharp
print("返回一个数的平方根" + Mathf.Sqrt(4));
print("返回一个数的平方根" + Mathf.Sqrt(16));
print("返回一个数的平方根" + Mathf.Sqrt(64));
```

**(11)判断一个数是否是2的n次方 - IsPowerOfTwo**
```CSharp
print("判断一个数是否是2的n次方" + Mathf.IsPowerOfTwo(4));
print("判断一个数是否是2的n次方" + Mathf.IsPowerOfTwo(8));
print("判断一个数是否是2的n次方" + Mathf.IsPowerOfTwo(3));
print("判断一个数是否是2的n次方" + Mathf.IsPowerOfTwo(1));
```

**(12)判断正负数 - Sign**
```CSharp
//返回的是1和-1
print("判断正负数" + Mathf.Sign(0));
print("判断正负数" + Mathf.Sign(10));
print("判断正负数" + Mathf.Sign(-10));
print("判断正负数" + Mathf.Sign(3));
print("判断正负数" + Mathf.Sign(-2));
```
## 1.4 Mathf中的常用方法 -- 循环计算
**(1)插值运算 - Lerp**
```CSharp
float start = 0;
float result = 0;
float time = 0;
//Lerp函数公式
result = Mathf.Lerp(start, end, t);

//t为插值系数，取值范围为 0~1
result = start + (end - start)*t
```

**(2)插值运算用法一**
每帧改变start的值——变化速度先快后慢，位置无限接近，但是不会得到end位置
```CSharp
start = Mathf.Lerp(start, 10, Time.deltaTime);
```

**(3)插值运算用法二**
每帧改变t的值——变化速度匀速，位置每帧接近，当t>=1时，得到结果
```CSharp
time += Time.deltaTime;
result = Mathf.Lerp(start, 10, time);
```
****
## 2. 三角函数
![alt text](/Unity/图片/Unity基础/Unity基础09-23_20-49-27.jpg)

### 2.1 弧度, 角度相互转化
- 弧度转角度
```CSharp
float rad = 1;
float anger = rad * Mathf.Red2Deg;
```
- 角度转弧度
```CSharp
float anger = 1;
float rad = anger * Mathf.Deg2rad;
```

### 2.2 三角函数
Mathf中的三角函数相关的方法, 传参需要用弧度值
```CSharp
print(Mathf.Sin(30 * Mathf.Deg2Rad));//0.5
print(Mathf.Cos(30 * Mathf.Deg2Rad));//0.5
```

### 2.3 反三角函数
反三角函数得到的结果是正弦或者余弦值对应的弧度
```CSharp
float rad = Mathf.Asin(0.5f);
print(rad * Rad2Deg);//30
```
****
## 3. 坐标系
### 3.1 世界坐标系
- 原点: 世界的中心点
- 三个轴向是固定的
```CSharp
//目前学习的和世界坐标系相关的
this.transform.position;
this.transform.rotation;
this.transform.eulerAngles;
this.transform.lossyScale;
```

### 3.2 局部坐标系
- 原点: 物体的中心点(建模时确定)
- 轴向: 右为+x, 上为+y, 前为+z
```CSharp
//相对父对象的物体坐标系的位置 本地坐标 相对坐标
this.transform.localPosition;
this.transform.localEulerAngles;
this.transform.localRotation;
this.transform.localScale;
```

### 3.3 屏幕坐标系
- 原点: 屏幕左下角
- 轴向: 右为+x, 上为+y
- 最大宽高: `Screen.width` / `Screen.height`
```CSharp
Input.mousePosition
Screen.width;
Screen.height;
```

### 3.4 视口坐标系
- 原点: 屏幕左下角
- 轴向: 右为+x, 上为+y
- 特点: 左下为(0,0), 右上为(1,1)

### 3.5 坐标转换
```CSharp
//世界转本地
this.transform.InverseTransformDirection
this.transform.InverseTransformPoint
this.transform.InverseTransformVector

//本地转世界
this.transform.TransformDirection
this.transform.TransformPoint  
this.transform.TransformVector

//世界转屏幕
Camera.main.WorldToScreenPoint
//屏幕转世界
Camera.main.ScreenToWorldPoint

//世界转视口
Camera.main.WorldToViewportPoint
//视口转世界
Camera.main.ViewportToWorldPoint

//视口转屏幕
Camera.main.ViewportToScreenPoint

//屏幕转视口
Camera.main.ScreenToViewportPoint;
```
***
## 4. 向量
***
### 4.1 向量
- 模长: `magnitude`
- 归一化: `normalized`
***