[toc]

***
# 一. 模型的制作过程

建模师:
① 建模 -> ② 展UV -> ③ 材质和纹理贴图
动作师:
④ 骨骼绑定 -> ⑥ 动画制作
***
# 二. 2D相关
***
## 1. 图片导入相关设置
### 1.1 概述
Unity支持的图片格式有很多
- BMP:是Windows操作系统的标准图像文件格式，特点是几乎不进行压缩，占磁盘空间大
</br>

- TIF:基本不损失图片信息的图片格式，缺点是体积大
</br>

- JPG:一般指JPEG格式，属于有损压缩格式，能够让图像压缩在很小的存储空间，一定程度上会损失图片数据，无透明通道
</br>

- PNG:无损压缩算法的位图格式，压缩比高，生成文件小，有透明通道
</br>

- TGA:支持压缩，使用不失真的压缩算法，还支持编码压缩。体积小，效果清晰，兼备BMP的图像质量和JPG的体积优势，有透明通道
</br>

- PSD:是PhotoShop（PS）图形处理软件专用的格式，通过一些第三方工具或自制工具可以直接将PSD界面转为UI界面
</br>

其它还支持
- EXR、GIF、HDR、IFF、PICT等等

其中Unity最常用的图片格式是
- JPG、PNG、TGA三种格式

***
### 1.2 图片设置的6大部分

<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-28_16-23-27.jpg)

</center>

1. 纹理类型
2. 纹理形状
3. 高级设置
4. 平铺拉伸
5. 平台设置
6. 预览窗口


***
## 2. 纹理类型 (Texture Type)
***
### 2.1 纹理类型主要是设置什么
设置纹理类型主要是为了让纹理图片有不同的主要用途, 指明其是用于哪项工作的纹理
***
### 2.2 参数设置
<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-28_16-34-06.jpg)

</center>

#### (1) Default
默认纹理, 大部分导入的模型贴图都是该类型

名词解释:
[伽马颜色空间](https://docs.unity3d.org.cn/6000.0/Documentation/Manual/color-spaces.html)

<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-28_16-36-14.jpg)
![alt text](/Unity/图片/Unity核心/Unity核心09-28_16-57-31.jpg)

</center>

**Alpha Source**

<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-28_16-58-55.jpg)

</center>

#### (2) Normal map
法线贴图格式

法线贴图就是在原物体的凹凸表面的每个点上均作法线
法线就是垂直于某个点的切线的方向向量

<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-28_17-07-19.jpg)
![alt text](/Unity/图片/Unity核心/Unity核心09-28_17-09-19.jpg)

</center>

#### (3) Editor GUI and Legacy GUI
一般在编辑器中或者GUI上使用的纹理

#### (4) Sprite（2D and UI）
2D游戏或者UGUI中使用的格式

<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-28_17-14-40.jpg)

</center>

- **Sprite Mode**：图像中提取精灵图形的方式
  - Single：按原样使用精灵图像
  - Multiple：瓦片模式，如果是图集，使用该选项，可以在Sprite Editor编辑窗口自定义图片
  - Polygon：网格精灵模式
</br>

- **Pixels Per Unit**：世界空间中的一个距离单位对应多少像素
</br>

- **MeshType**：网格类型；只有Single和Multiple模式才支持
  - Full Rect：创建四边形，将精灵显示在四边形上
  - Tight：基于像素Alpha值来生成网格，更加贴合精灵图片的形状
    - 任何小于32*32的精灵都使用FullRect模式，即使设置成Tight模式也是
</br>

- Extrude Edges：使用滑动条确定生成的网格中精灵周围流出的区域大小
</br>

- **Pivot**：精灵图片的轴心点，Single模式才有此选项
  - 对应九宫格布局的九个点，还可以自定义
</br>

- **Generate Physics Shape**：启用此选项，Unity会自动根据精灵轮廓生成默认物理形状
  - 只有Single 和Multiple模式才可使用
</br>

- **Sprite Editor**：编辑Sprite，需要安装2D Sprite包

#### (5) Cursor
自定义光标

#### (6) Cookie
光源剪影格式

<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-28_17-27-44.jpg)

</center>

- Light Type：应用的光源类型
    一般点光源的剪影需要设置为立方体纹理
    方向光和聚光灯的剪影设置为2D纹理

    - Spotlight：聚光灯类型，需要边缘纯黑色纹理
    - Directional：方向光，平铺纹理
    - Point：点光源，需要设置为立方体形状

#### (7) Lightmap
光照贴图格式

#### (8) Single Channel
纹理只需要单通道的格式

<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-28_17-31-21.jpg)

</center>

- Channel：希望将纹理处理为Alpha还是Red通道
    - Alpha：使用Alpha通道，不允许进行压缩
    - Red：使用红色通道

*** 
## 3. 纹理形状
纹理不仅可以用于模型贴图, 还可以用于制作天空盒与反射探针
纹理形状设置, 主要就是用于在两种模式之间进行切换

### 3.1 参数

- ==Texture Shape==：纹理形状
  - ==2D==：2D纹理，最常用设置，这些纹理将使用到模型和GUI元素上
  - ==Cube==：立方体贴图，主要用于天空盒和反射探针

以下对于Cube的参数进行详细讲解
<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-29_08-56-55.jpg)

</center>

- Mapping：如何将纹理投影到游戏对象上
  - Auto：根据纹理信息创建布局
  - 6 Frames Layout：纹理包含标准立方体贴图布局之一排列的六个图像
  - Latitude-Longitude Layout：将纹理映射到2D维度/经度
  - Mirrored Ball：将纹理映射到类似球体的立方体贴图上
</br>

- Convolution Type：纹理的过滤类型
  - None：无过滤
  - Specular：将立方体作为反射探针
  - Diffuse：将纹理进行过滤表示辐照度，可作为光照探
</br>

- Fixup Edge Seams：Convolution Type 为None 和 Diffuse下才有用。解决低端设备上面之间立方体贴图过滤错误

***
## 4. 纹理高级设置
<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-29_09-05-20.jpg)

</center>

***
### 4.1 参数

>为什么纹理要设置为2的N次方？
>因为图形学规则，纹理必须是2的幂尺寸
- ==Non-Power of 2==：如果纹理尺寸非2的幂如何处理
  - ==None==：纹理尺寸大小保持不变
  - ==To nearest==：将纹理缩放到最接近2的幂的大小,（注意：PVRTC格式要求纹理为正方形）
  - ==To larger==：将纹理缩放到最大尺寸大小值的2的幂的大小
  - ==To smaller==：将纹理缩放到最小尺寸大小值的2的幂的大小
</br>

- ==Read/Write Enabled==：启用可以使用Unity中提供的一些方法从纹理中获取到数据（一般需要获取图片数据时才开启）
</br>

- Streaming Mipmaps：启用则可以使用纹理串流，主要用于在控制加载在内存中的Mipmap级别，用于减少Unity对于纹理所需的内存总量，用性能换内存
  - Mip Map Priority：Mipmap优先级，Unity根据优先级来确定分配资源时优先考虑哪些Mipmap
</br>

- ==Generate Mip Maps==：允许生成MipMap
  - Border Mip Maps：启用可避免颜色向外渗透到较低MIP级别的边缘
  - Mip Map Filtering：优化图像质量的过滤方法
    - Box：随着尺寸减小，级别更加平滑
    - Kaiser：随着Mipmap尺寸大小下降而使用的锐化算法，如果远处纹理太模糊，可以使用该算法
  - Mip Maps Preserve Coverage：Mipmap的Alpha通道在Alpha测试期间保留覆盖率
    - Alpha Cutoff Value：覆盖率参考值
  - Fadeout Mip Maps：级别递减时使Mipmap淡化为灰色

### 4.2 什么是Mipmap?
先贴上我最喜欢的闫老师的课,讲的很清楚 [Lecture 09, 从43:24开始](https://www.bilibili.com/video/BV1X7411F744?spm_id_from=333.788.videopod.episodes&vd_source=e5ff09f1c2b416e099232ca31ec5028d&p=9)

开启MipMap功能后，Unity会帮助我们根据图片信息生成n张不同分辨率的图片
在场景中会根据我们离该模型的距离选择合适尺寸的图片用于渲染，提升渲染效率

***
## 5. 平铺拉伸
<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-29_09-45-32.jpg)

</center>

### 5.1 参数

- ==Wrap Mode==：平铺纹理时的方式
  - Repeat：在区块中重复纹理
  - Clamp：拉伸纹理的边缘
  - Mirror：在每个整数边界上镜像纹理以创建重复图案
  - Mirror Once：镜像纹理一次，然后将拉伸边缘纹理
  - Per-axis：单独控制如何在U轴和V轴上包裹纹理
</br>

- ==Filter Mode==：纹理在通过3D变化拉伸时如何进行过度
  - Point：纹理在靠近时变为块状
  - Bilinear：纹理在靠近时变得模糊
  - Trilinear：与Bilinear类似，但纹理也在不同的Mip级别之间模糊
</br>

- Aniso Level：以大角度查看纹理时提高纹理质量。性能消耗高

***
## 6. 平台设置
<center>

![alt text](/Unity/图片/Unity核心/Unity核心09-29_10-04-04.jpg)

</center>

平台设置主要设置纹理最终打包时在不同平台下的尺寸, 格式, 压缩方式
它影响了你包的大小和读取性能方面的问题, 所以非常重要
***
### 6.1 参数

- ==Max Size==：设置导入的纹理的最大尺寸，即使美术出的很大的图，也可以通过这里把它们限制在一定范围内
</br>

- ==Resize Algorithm==：当纹理尺寸大于指定的Max Size时，使用的缩小算法
  - Mitchell：默认米切尔算法来调整大小，该算法是常用的尺寸缩小算法
  - Bilinear：使用双线性插值来调整大小。如果细节很重要的图片，可以使用它，它比米切尔算法保留的细节更多
</br>

- ==Format==：纹理格式, 各平台支持的格式有所不同, 如果选择Automatic, 会根据平台使用默认设置
  - [各平台纹理压缩格式, 这里贴了官方文档](https://docs.unity.cn/cn/2020.3/Manual/class-TextureImporterOverride.html)
  - IOS
    - 选择默认的纹理压缩设置 (PVRTC) 可获得更大的兼容性。
      如果您的应用程序不包含 OpenGL ES 2 支持，则可以选择一种 ASTC 格式。这些格式提供更好的质量和灵活性，并且压缩速度比 PVRTC 快。
  - Android
    - 由于安卓设备众多，设备标准都不同意，一般会根据不同的设备标准制作多个安装包
</br>

- ==Compression==：选择纹理的压缩类型，帮助Unity正确选择压缩格式, 会根据平台和压缩格式的可用性进行压缩
  - None：不压缩纹理
  - Low Quality：以低质量格式压缩纹理
  - Normal Quality：以标准格式压缩纹理
  - High Quality：以高质量格式压缩纹理
</br>

- ==Use Crunch Compression==：启用后，使用Crunch压缩。Crunch是一种基于DXT或ETC纹理压缩的有损压缩格式。压缩时间长，解压速度快。
  - 压缩质量，质量越高意味着纹理越大，压缩时间越长
</br>

- ==Split Alpha Channel==：Alpha通道分离，节约内存。会把一张图分成两张纹理。一张包含RGB数据，一张包含Alpha数据，在渲染时再合并渲染。
</br>

- ==Override ETC2 fallback==：不支持ETC2压缩的设备上，使用的格式
</br>

关于双线性插值, 还是闫老师的课, [还是Lecture 09, 22:45](https://www.bilibili.com/video/BV1X7411F744/?spm_id_from=333.788.videopod.episodes&vd_source=e5ff09f1c2b416e099232ca31ec5028d&p=9)

***
# 二. Sprite

***
## 7. Sprite Editor
精灵图片编辑器
它主要用于编辑2D游戏开发中使用的Sprite精灵图片
它可以用于编辑图集中提取元素, 设置精灵边框, 设置九宫格, 设置轴心(中心)点等功能 

如果你的项目是创建时是3D项目的话, 得在PackageManager里下载2D Sprite包
***
### 7.1 Single图片编辑

左上角
<center>

![左上](/Unity/图片/Unity核心/Unity核心09-29_10-50-58.jpg)

</center>

#### (1) Sprite Editor
<center>

![右下](/Unity/图片/Unity核心/Unity核心09-29_10-43-29.jpg)

</center>

- Position：在图片中的偏移位置和宽高
- Border：边框，用于设置九宫格的4条边
- Pivot：轴心（中心）点位置
- Pivot Unit Mode：轴心点单位模式
  - Normalized：标准化模式，0~1
  - Pixels：像素模式
- Custom Pivot：自定义轴心点

#### (2) Custom Outline (决定渲染区域)
自定义边缘线, 自定义物理形状
<center>

![右下](/Unity/图片/Unity核心/Unity核心09-29_10-58-35.jpg)

</center>

- Snap：将控制点贴近在最近的像素
- Outline Tolerance：轮廓点的复杂性和准确性，0~1, 值越大轮廓点越多，越准确
- Generate：生成网格轮廓

#### (3) Custom Physics Shape (决定碰撞判断区域)
自定义精灵图片的物理形状, 主要用于设置需要物理碰撞判断的2D图片
它决定了之后产生碰撞检测的区域

#### (4) Secondary Textures (为图片添加特殊效果)
次要纹理设置, 可以将其他纹理和该精灵图片关联
着色器可以得到这些辅助纹理, 然后用于做一些效果处理, 让精灵应用其他效果

***
### 7.2 Multiple图集元素分割
当我们的图片资源是图集时, 我们需要将其Sprite Mode设置为Multiple
这时就可以使用Sprite Editor自带的功能进行图集元素分割
***
#### (1)自动分割
Type 选中 Automatic

<center>

![右下](/Unity/图片/Unity核心/Unity核心09-29_11-13-44.jpg)

</center>

- Pivot：单张图片轴心点位置
- Custom Pivot：自定义轴心点
- Method：如何处理现有对象
  - Delete Existing：替换掉已经选择的任何矩形
  - Smart：尝试创建新矩形同时保留或调整现有矩形
  - Safe：添加新矩形而不更改任何已经存在的矩形

#### (2) 按单位大小分割
Type 选中 Grid By Cell Size

<center>

![右下](/Unity/图片/Unity核心/Unity核心09-29_11-18-07.jpg)

</center>

- Pixel Size：单元格宽高
- Offset：偏移位置
- Padding：和边缘的偏移位置
- Keep Empty Rects：是否保留空矩形

#### (3) 按单元格数量分割
Type 选中 Grid By Cell Count
<center>

![右下](/Unity/图片/Unity核心/Unity核心09-29_11-55-55.jpg)

</center>

- Column & Row：行列数

***
### 7.3 Polygon多边形编辑

如果我们使用的资源时多边形资源 
我们可以在设置时将模式设置为Polygon
然后可以在Sprite Editor中进行快捷设置

这个很简单,只需要设置你要的多边形边数(0 ~ 128), 生成对应的多边形用来切割和设置渲染范围 

***
## 8. Sprite Renderer
Sprite Renderer是精灵渲染器
所有2D游戏中游戏资源（除UI外）都是通过Sprite Renderer让我们看到的
它是2D游戏开发中的一个极为重要的组件
***
### 8.1 2D对象的创建
三种方式

1. 直接拖拽 Texture Type 为 Sprites(2D and UI) 的 Sprite 图片到场景中
2. 右键创建: 2D Object -> Sprite -> 关联一个Sprite
3. 创建一个空物体, 添加 Sprite Renderer

***

### 8.2 参数
<center>

![右下](/Unity/图片/Unity核心/Unity核心09-29_14-46-24.jpg)

</center>

- ==Sprite==：渲染的精灵图片
</br>

- Color：定义着色，一般没有特殊需求不会修改
</br>

- Filp：水平或竖直翻转精灵图片
</br>

- ==Draw Mode==：绘制模式，当尺寸变化时的缩放方式
  - ==Simple==：简单模式，缩放时整个图像一起缩放
  - ==Sliced==：切片模式，9宫格切片模式，十字区域缩放，4个角不变化
    - 一般用于变化不大的纯色图（注意：需要把精灵的网格类型设置为Full Rect）
  - ==Tiled==：平铺模式，将中间部分进行平铺而不是缩放（注意：需要把精灵的网格类型设置为Full Rect）
    - ==Continuous==：当尺寸变化时，中间部分将均匀平铺
    - ==Adaptive==：当尺寸变化时，类似Simple模式，当更改尺寸达到Stretch Value时，中间才开始平铺
</br>

- ==Mask Interaction==：与精灵遮罩交互时的方式
  - ==None==：不与场景中任何精灵遮罩交互
  - ==Visible inside Mask==：精灵遮罩覆盖的地方可见，而遮罩外部不可见
  - ==Visible Outside Mask==：精灵遮罩外部的地方可见，而遮罩覆盖处不可见
</br>

- Sprite Sort Point：计算摄像机和精灵之间距离时，使用精灵中心Center还是轴心点Pivot，一般情况下不用修改
</br>

- Material：材质，可以使用一些自定义材质来显示一些特殊效果
  - 一般情况不修改。默认材质是不会受到光照影响的，如果想要受光照影响，可以选择Default-Diffuse
</br>

- ==Additional Settings==：高级设置
  - ==Sorting Layer==：排序层选择
  - ==Order in Laye==r：层级序列号，数值越大约会显示在前面
</br>

***

### 8.3 代码设置

#### (1) 获取Sprite Renderer
```CSharp
GameObject obj = new GameObject();
SpriteRenderer sr = obj.AddComponent<SpriteRenderer>();
```

#### (2) 动态的改变图片
```CSharp
sr.sprite = Resources.Load<Sprite>("dead1");
//别忘了, 这种加载方式的前提是你把资源放在了Resources文件夹下了
```

#### (3) 动态的加载 图集中的图

```CSharp
Sprite[] sprs = Resources.LoadAll<Sprite>("RobotBoyIdleSprite");
sr.sprite = sprs[10];
```